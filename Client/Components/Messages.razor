@using MudBlazor
@inject DataAccessService dataAccess
@implements IDisposable

<MudTable Items="@_messages" Elevation="0" Hover="false" Border="false"  Class="pt-8">
        <HeaderContent>
        </HeaderContent>
        <RowTemplate >
        <MudTd Class="pb-0" Style="font-weight:bold;display:block">@context.Title - @context.DateSent.ToShortDateString()</MudTd>
        <MudTd Style="display:block">@context.Body</MudTd>
        </RowTemplate>
</MudTable>

@code {
    public DataAccessService? _data;
    public List<Message>? _messages;

    protected override async Task OnInitializedAsync()
    {
        _data = dataAccess;
        var msg = await _data.GetMessages();
        _messages = msg.ToList<Message>();
    }

    public void Dispose()
    {
        _data = null;
    }

}
